{% extends "base.html" %}
{% block title %}Available Properties{% endblock %}

{% block content %}
<div class="listings-container">

    <div class="header-row">
        <h2>Available Properties</h2>

        {% if user.is_authenticated and user.profile.role == 'LANDLORD' %}
            <a href="{% url 'rentals:property_create' %}" class="btn-primary-add">
                + New Property
            </a>
        {% endif %}
    </div>

    {% if properties %}
    <div class="property-grid">

        {% for p in properties %}
        <div class="property-card">

            <!-- Property Image -->
            <div class="property-image-wrapper">
                {% if p.image %}
                    <img src="{{ p.image.url }}" class="property-image" alt="{{ p.title }}">
                {% else %}
                    <img src="https://picsum.photos/500/300?blur=2" class="property-image" alt="No image">
                {% endif %}
            </div>

            <!-- Property Info -->
            <div class="property-info">
                <h3>{{ p.title }}</h3>
                <p class="address">{{ p.address }}</p>

                <!-- Property Specs -->
                <div class="property-specs">
                    <div class="spec">
                        <svg class="spec-icon"><use href="#icon-bed"/></svg>
                        <span>{{ p.bedrooms }}</span>
                    </div>

                    <div class="spec">
                        <svg class="spec-icon"><use href="#icon-bath"/></svg>
                        <span>{{ p.bathrooms }}</span>
                    </div>

                    <div class="spec">
                        <svg class="spec-icon"><use href="#icon-area"/></svg>
                        <span>{{ p.sqft }} SqFt</span>
                    </div>
                </div>

                <p class="rent">${{ p.monthly_rent }}</p>

                <a href="{% url 'rentals:property_detail' p.pk %}" class="btn-view">
                    View Details
                </a>
            </div>
        </div>
        {% endfor %}

    </div>
    {% else %}
        <p class="text-muted empty-msg">No properties available.</p>
    {% endif %}
</div>

<!-- SVG Icons -->
<svg style="display:none;">
    <symbol id="icon-bed" viewBox="0 0 24 24">
        <path d="M2 10v10h2v-2h16v2h2V10H2zm2 4v-2h16v2H4zm3-8h10a3 3 0 013 3v1H4v-1a3 3 0 013-3z"/>
    </symbol>

    <symbol id="icon-bath" viewBox="0 0 24 24">
        <path d="M7 3a5 5 0 00-5 5v6a5 5 0 0010 0V8a5 5 0 00-5-5zm10 9a3 3 0 110 6 3 3 0 010-6z"/>
    </symbol>

    <symbol id="icon-area" viewBox="0 0 24 24">
        <path d="M3 3h18v18H3V3zm2 2v14h14V5H5z"/>
    </symbol>
</svg>

{% endblock %}
